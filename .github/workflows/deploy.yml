name: Deploy HTML version to GitHub page
on: [push]
permissions:
  contents: write
jobs:
  Org-mode-to-HTML:
    runs-on: ubuntu-latest
    steps:
      - run: sudo apt-get install emacs
      - run: emacs index.org --batch -f org-html-export-to-html --kill
  Publish-HTML:
    runs-on: ubuntu-latest
    steps:

      - name: Check out repository code
        uses: actions/checkout@v3

      - name: Install Emacs
        run: sudo apt-get install emacs

      - name: Deploy to GitHub Pages
        with:
          target_branch: gh-pages
          build_dir: public
        env:
	  GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      